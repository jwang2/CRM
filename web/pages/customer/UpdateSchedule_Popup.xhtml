<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j">
    <rich:popupPanel id="updateschedule" header="Update Schedule" autosized="true" modal="false" 
                     moveable="true" resizeable="false" followByScroll="false" domElementAttachment="parent">
        <h:form>
            <h:panelGroup id="messagePanelUpdateSchedule" layout="block">
                <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
            </h:panelGroup>
            <h:panelGrid columns="2" rendered="true">
                <h:outputLabel value="Assign To:"/>
                <rich:autocomplete value="#{customerDetailBean.currentSchedule.assignedUser}" mode="cachedAjax" minChars="1" autocompleteMethod="#{campaignSearchBean.autocompleteAssignTo}" autofill="false" style="border: none; background: transparent">
                    <f:validateRequired/>
                </rich:autocomplete>

                <h:outputLabel value="Task:"/>
                <h:inputText label="Task" size="27" value="#{customerDetailBean.currentTask.name}">
                    <f:validateRequired/>
                </h:inputText>
                <h:outputLabel value="Task Type:"/>
                <h:selectOneMenu value="#{customerDetailBean.currentTask.type}">
                    <f:selectItems value="#{customerDetailBean.taskTypes}" var="tasktype" itemLabel="#{tasktype}" itemValue="#{tasktype}"/>
                </h:selectOneMenu>
                <h:outputLabel value="Scheduled Time:"/>
                <rich:calendar value="#{customerDetailBean.currentSchedule.scheduledDatetime}"  datePattern="MM/dd/yyyy hh:mm:ss" enableManualInput="true">
                    <f:validateRequired/>
                </rich:calendar>
                <h:outputLabel value="Status:"/>
                <h:selectOneMenu value="#{customerDetailBean.currentSchedule.status}">
                    <f:selectItems value="#{customerDetailBean.scheduleStatuses}" var="status" itemLabel="#{status}" itemValue="#{status}"/>
                </h:selectOneMenu>
                <h:outputText value="Note:"/>
                <h:inputTextarea rows="4" cols="40" value="#{customerDetailBean.currentSchedule.note}"/>
            </h:panelGrid>
            <h:panelGroup>
                <a4j:commandButton value="Cancel" oncomplete="#{rich:component('updateschedule')}.hide(event);return false;"/>
                <a4j:commandButton execute="updateschedule" render="scheduleMain" value="Update" action="#{customerDetailBean.performScheduleAction(loginBean.userName, false)}" oncomplete="#{rich:component('updateschedule')}.hide(event);return false;"/>
            </h:panelGroup>
        </h:form>
    </rich:popupPanel>
</ui:composition>

